name: Comment PR

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  build:
    permissions:
      packages: write
      contents: read
    runs-on: ubuntu-latest
    steps:
    - uses: actions/github-script@v6
      env:
        RELEASE_CHANNEL_BASE_URI: 'https://testing.com'
        TFSO_MODULE: 'product'
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        script: |
          const { RELEASE_CHANNEL_BASE_URI, TFSO_MODULE } = process.env
          github.rest.issues.createComment({
            issue_number: context.payload.pull_request.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: `Remember to test the site! ðŸ‘‰ ${RELEASE_CHANNEL_BASE_URI}/modules/${TFSO_MODULE}`
          })